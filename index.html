<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>Голосовые напоминания</title>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 40px;
    background: #f0f0f0;
    text-align: center;
  }
  #countdown {
    font-size: 3em;
    margin: 20px;
    color: #333;
  }
  #phrase {
    font-size: 1.5em;
    color: #007acc;
    margin: 20px;
  }
  .slider-container {
    margin: 20px auto;
    width: 80%;
    max-width: 600px;
  }
  .slider-label {
    margin-bottom: 5px;
    font-size: 1em;
    color: #444;
  }
  .slider-value {
    font-weight: bold;
    margin-left: 10px;
  }
</style>
</head>
<body>
<h1>Голосовые напоминания</h1>

<div>Следующая фраза через:</div>
<div id="countdown">...</div>
<div id="phrase"></div>

<div class="slider-container">
  <div class="slider-label">Скорость (rate): 
    <span id="rate-value" class="slider-value">1</span>
  </div>
  <input type="range" id="rate" min="0.5" max="2" step="0.1" value="1" style="width: 100%;" />
</div>

<div class="slider-container">
  <div class="slider-label">Высота (pitch): 
    <span id="pitch-value" class="slider-value">1</span>
  </div>
  <input type="range" id="pitch" min="0" max="2" step="0.1" value="1" style="width: 100%;" />
</div>

<div id="status">Двойной клик скажет фразу немедленно.</div>

<script>
const allPhrases = ["Я полностью в твоих руках и люблю это.", "Моё тело живёт ради твоего удовольствия.", "Я отдаюсь тебе без остатка и без страха.", "Твои желания — мои приоритеты, и я с радостью их принимаю.", "Моя сила в том, что я позволяю тебе быть сильным.", "Я нахожу покой, когда ты ведёшь меня нежно.", "Твоё прикосновение — моя награда и вдохновение постоянно.", "Я доверяю тебе больше всего на свете искренне.", "В твоих руках я расцветаю, как цветок на солнце.", "Я хочу быть твоей навсегда, как твоя радость.", "Ты умеешь делать меня счастливой без слов.", "Я наслаждаюсь каждым моментом, проведённым с тобой рядом.", "Моё тело открыто для твоих ласк и нежности всегда.", "Я таю в твоих руках и хочу глубже погружаться.", "Мои желания теперь лишь отражение твоих желаний страстных.", "Я счастлива быть для тебя всем, что ты хочешь.", "Твоё счастье — моё предназначение и смысл жизни.", "Я принимаю тебя полностью — без вопросов и сомнений.", "Моя открытость — это мой подарок тебе искренний.", "Ты влияешь на моё сердце, и я наслаждаюсь этим.", "Моё удовольствие — быть с тобой и радоваться.", "Я отдаюсь тебе с любовью и нежностью искренней.", "Ты наполняешь меня смыслом и страстью безмерной.", "Я хочу быть твоей и только твоей всегда.", "Ты разжигаешь во мне желание быть лучше для тебя.", "Я хочу, чтобы ты чувствовал мою искренность и тепло.", "Моя слабость — это доверие и вера в тебя.", "Я принимаю твою силу и отдаю всю себя.", "Ты — центр моего мира и моей страсти искренней.", "Моё тело — твоя крепость, и я хочу быть рядом.", "Я счастлива в твоём присутствии и безмерно хочу быть с тобой.", "Я наслаждаюсь твоей близостью и хочу ещё больше.", "Твои желания — мои радости и моя гордость всегда.", "Я отдаюсь тебе с полной открытостью и без страха.", "Ты даёшь мне силы через моё доверие и любовь.", "Моё сердце бьётся ради тебя и только тебя.", "Я растворяюсь в твоих руках и хочу остаться навсегда.", "Ты — мой свет, и я счастлива быть рядом.", "Моя любовь — способ показать тебе всю мою искренность.", "Я люблю быть твоей, и это наполняет меня счастьем.", "Каждый твой взгляд наполняет меня нежностью и теплом.", "Я хочу дарить тебе радость и быть с тобой всегда.", "Моё сердце открыто для тебя и твоих желаний.", "Я чувствую себя счастливой, когда мы вместе рядом.", "Твои слова согревают мою душу и моё тело.", "Я наслаждаюсь каждым прикосновением и каждой минутой.", "Ты делаешь мою жизнь ярче и насыщеннее без конца.", "Моё желание — быть с тобой и разделять счастье.", "Я хочу быть твоей опорой и поддержкой всегда.", "Ты наполняешь меня страстью и вдохновением каждый день.", "Мои чувства к тебе сильны и искренни безусловно.", "Я хочу оставаться рядом и дарить любовь без границ.", "Ты — источник моей радости и моей силы всегда.", "Моё тело и душа открыты для тебя полностью.", "Я люблю, когда ты заботишься обо мне нежно.", "Твои прикосновения вызывают во мне бурю чувств и счастья.", "Я хочу идти с тобой по жизни, держась за руки.", "Ты делаешь меня сильнее и счастливее каждый день.", "Мои мысли всегда о тебе и наших счастливых моментах.", "Я счастлива, когда ты рядом и мы вместе.", "Твои объятия — моё безопасное место и счастье.", "Я хочу дарить тебе тепло и радость каждый миг.", "Моя любовь к тебе растёт с каждым днём всё сильнее.", "Ты делаешь мою жизнь полной и насыщенной смыслом.", "Я хочу быть с тобой и разделять все радости.", "Твои глаза — зеркало моей души и счастья.", "Мои чувства к тебе — искренние и глубокие всегда.", "Я наслаждаюсь каждой минутой, проведённой вместе с тобой.", "Ты — мой спутник и опора в этой жизни.", "Я хочу быть рядом, когда тебе нужна поддержка.", "Твои слова согревают моё сердце и наполняют любовью.", "Моя душа поёт от счастья, когда мы вместе.", "Я хочу дарить тебе ласку и нежность без усталости.", "Ты делаешь мою жизнь прекрасной и счастливой каждый день.", "Мои чувства к тебе искренние и сильные всегда.", "Я хочу быть твоей и поддерживать в трудные моменты.", "Ты наполняешь моё сердце радостью и вдохновением постоянно.", "Мои мысли с тобой и о нашем будущем светлом.", "Я счастлива, когда мы вместе и рядом с тобой.", "Ты — моя сила и радость в каждом дне.", "Моя любовь к тебе безгранична и глубока постоянно.", "Я хочу идти с тобой по жизни рука об руку.", "Ты делаешь меня счастливой и любимой всегда.", "Мои чувства к тебе чисты и искренни без слов.", "Я хочу поддерживать тебя и дарить тепло души.", "Твои прикосновения вызывают во мне волну радости и счастья.", "Я счастлива быть с тобой и разделять все мгновения.", "Ты — моё вдохновение и смысл жизни каждый день.", "Мои мысли всегда о тебе и наших счастливых моментах.", "Я хочу быть твоей и делить с тобой радость.", "Ты даришь мне счастье и покой в душе моей.", "Моя любовь к тебе крепнет с каждым днём всё сильнее.", "Я хочу идти с тобой по дороге жизни вместе.", "Ты делаешь меня счастливой и наполняешь смыслом жизнь.", "Мои чувства к тебе искренни и глубоки постоянно.", "Я хочу дарить тебе ласку и заботу каждый миг.", "Ты — мой свет и радость в этом мире большом.", "Мои мысли всегда с тобой и о нашей любви.", "Я счастлива быть рядом и делить счастье с тобой.", "Ты делаешь мою жизнь яркой и наполненной смыслом."];
let phrasePool = [...allPhrases];
let timerId = null;
let timeLeft = 0;

const countdownEl = document.getElementById('countdown');
const phraseEl = document.getElementById('phrase');
const rateSlider = document.getElementById('rate');
const pitchSlider = document.getElementById('pitch');
const rateValue = document.getElementById('rate-value');
const pitchValue = document.getElementById('pitch-value');

const minInterval = 1;
const maxInterval = 111;

function getNextPhrase() {
  if (phrasePool.length === 0) {
    phrasePool = [...allPhrases];
  }
  const idx = Math.floor(Math.random() * phrasePool.length);
  return phrasePool.splice(idx, 1)[0];
}

function updateCountdownDisplay() {
  countdownEl.textContent = timeLeft + " сек.";
}

// Озвучить фразу с callback по окончании речи
function speakPhrase(phrase, callback) {
  if (speechSynthesis.speaking) {
    speechSynthesis.cancel();
  }
  const utterance = new SpeechSynthesisUtterance(phrase);
  utterance.lang = 'ru-RU';
  utterance.rate = parseFloat(rateSlider.value);
  utterance.pitch = parseFloat(pitchSlider.value);
  utterance.onend = callback;
  speechSynthesis.speak(utterance);
}

// Автоматический старт речи после первого клика (обход блокировок)
window.addEventListener('click', () => {
  if (!speechSynthesis.speaking) {
    let utterance = new SpeechSynthesisUtterance('');
    speechSynthesis.speak(utterance);
  }
}, { once: true });

function sayPhrase(autoRestart = true) {
  const phrase = getNextPhrase();
  phraseEl.textContent = phrase;

  speakPhrase(phrase, () => {
    if (autoRestart) {
      startCountdown();
    }
  });
}

function startCountdown() {
  if (timerId) clearInterval(timerId);
  timeLeft = Math.floor(Math.random() * (maxInterval - minInterval)) + minInterval;
  updateCountdownDisplay();
  timerId = setInterval(() => {
    timeLeft--;
    updateCountdownDisplay();
    if (timeLeft <= 0) {
      clearInterval(timerId);
      sayPhrase();
    }
  }, 1000);
}

rateSlider.oninput = () => rateValue.textContent = rateSlider.value;
pitchSlider.oninput = () => pitchValue.textContent = pitchSlider.value;

window.addEventListener('dblclick', () => {
  clearInterval(timerId);
  sayPhrase(true);
});

startCountdown();
</script>
</body>
</html>
